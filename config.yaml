# Walkability Optimization Configuration
# Balıkesir Şehir Merkezi

# Database Configuration
database:
  host: localhost
  port: 5432
  database: walkability_center_db
  user: seker
  password: ""  # Local dev: peer/ident auth, no password
  
# Balıkesir City Center Boundary
# Approximate coordinates for Balıkesir city center
# You may need to adjust these based on actual city boundaries
balikesir:
  name: "Balıkesir City Center"
  boundary:
    # Karesi + Altıeylül kentsel alanını kabaca kapsayan sınırlar
    north: 39.6700  # Latitude
    south: 39.6300
    east: 27.9100   # Longitude
    west: 27.8600
  center:
    latitude: 39.6400
    longitude: 27.8750

# WalkScore Parameters (from paper)
walkscore:
  # Breakpoints for Piecewise Linear Function (meters)
  # Balıkesir merkez için daha keskin bir PWL: 0–400m çok iyi, 400–1600m kademeli düşüş,
  # 2400m civarı orta-kötü, 4km+ çok düşük, 8km+ sıfır.
  breakpoints: [0, 400, 800, 1600, 2400, 4000, 8000]
  # Scores at breakpoints (0-100 scale)
  # 0–400m:100, 400–800m:100→90, 800–1600m:90→70, 1600–2400m:70→40,
  # 2400–4000m:40→10, 4000–8000m:10→0
  scores: [100, 100, 90, 70, 40, 10, 0]
  # Walking speed (m/s) - from Toronto paper: 1.2 m/s
  walking_speed: 1.2
  # 15 minutes in meters: 15 * 60 * 1.2 = 1080 meters
  fifteen_minutes_meters: 1080

# Amenity Weights (from WalkScore methodology)
amenities:
  grocery:
    weight: 1.0
    category: plain  # Single nearest choice
  school:
    weight: 0.8
    category: plain
  restaurant:
    weight: 0.6
    category: depth  # Multiple choices
    depth_count: 10  # Top 10 nearest restaurants
  healthcare:
    weight: 0.9
    category: plain  # Single nearest healthcare facility

# Depth Weights for restaurants (example distribution)
depth_weights:
  restaurant:
    - rank: 1
      weight: 0.4
    - rank: 2
      weight: 0.2
    - rank: 3
      weight: 0.15
    - rank: 4
      weight: 0.1
    - rank: 5
      weight: 0.05
    - rank: 6
      weight: 0.03
    - rank: 7
      weight: 0.03
    - rank: 8
      weight: 0.02
    - rank: 9
      weight: 0.01
    - rank: 10
      weight: 0.01

# Optimization Parameters
optimization:
  # Maximum number of amenities to allocate per type
  max_amenities_per_type: 9  # k ∈ {1, 2, ..., 9} as in paper
  # Default k for testing
  default_k: 1               # hızlı test için k=1
  
  # FAST MODE: For testing/development
  # Set to null or comment out for production (use ALL data)
  fast_mode_residential_sample: 0   # 0 = disable, use ALL residential
  fast_mode_candidate_sample: 0      # 0 = disable, use ALL candidates
  
  # Solver settings
  milp:
    time_limit_seconds: 18000  # 5 hours as in paper
    threads: 8
    mip_gap: 0.01  # 1% optimality gap
  greedy:
    # No specific parameters needed

# Success Criteria (from presentation)
success_criteria:
  # At least 70% of residential areas can reach all amenities within 15 minutes
  residential_coverage_percentage: 70
  # WalkScore must increase by at least 25 points
  min_walkscore_increase: 25
  # Average walking distance must decrease by at least 30%
  min_distance_reduction_percentage: 30

# OSM Data Collection
osm:
  # Tags for pedestrian network
  pedestrian_tags:
    - highway: footway
    - highway: path
    - highway: pedestrian
    - highway: steps
    - foot: yes
  
  # Tags for residential buildings (ULTRA COMPREHENSIVE)
  residential_tags:
    # ============================================================================
    # PRIMARY RESIDENTIAL BUILDING TYPES
    # ============================================================================
    # Generic residential
    - building: residential           # Genel konut binası
    - building: apartments            # Apartman (çoğul)
    - building: apartment             # Apartman (tekil)
    - building: residential_building  # Konut binası
    
    # Single-family homes (Müstakil evler)
    - building: house                 # Ev, müstakil konut
    - building: detached              # Müstakil ev
    - building: bungalow              # Bungalov
    - building: villa                 # Villa
    - building: cottage               # Kulübe, yazlık
    - building: cabin                 # Kabin, dağ evi
    - building: hut                   # Kulübe, baraka
    - building: chalet                # Dağ evi
    - building: static_caravan        # Sabit karavan
    - building: houseboat             # Ev teknesi
    
    # Semi-detached and row houses (Birleşik evler)
    - building: semidetached_house    # İkiz ev
    - building: semi-detached         # İkiz ev (kısa)
    - building: terrace               # Sıra ev
    - building: townhouse             # Şehir evi, sıra ev
    - building: row_house             # Sıra ev
    
    # Multi-family residential (Çok aileli)
    - building: block                 # Blok apartman
    - building: flats                 # Daireler
    - building: flat                  # Daire
    - building: maisonette            # Dubleks daire
    - building: duplex                # Dubleks
    - building: triplex               # Tripleks
    - building: quadplex              # Dört daireli
    
    # Specialized residential (Özel amaçlı)
    - building: dormitory             # Yurt, öğrenci evi
    - building: student_accommodation # Öğrenci yurdu
    - building: barracks              # Kışla (askeri konut)
    - building: dwelling              # Konut, mesken
    - building: studio                # Stüdyo daire
    
    # Turkish specific residential
    - building: konut                 # Konut (Türkçe)
    - building: apartman              # Apartman (Türkçe)
    - building: daire                 # Daire (Türkçe)
    - building: site                  # Site içi konut
    
    # Generic building (potentially residential)
    - building: yes                   # Tanımsız bina (konut olabilir)
    - building: building              # Genel bina
    
    # ============================================================================
    # LANDUSE RESIDENTIAL AREAS
    # ============================================================================
    - landuse: residential            # Konut alanı
    - landuse: residential_complex    # Konut kompleksi
    
    # ============================================================================
    # PLACE TAGS (may indicate residential areas)
    # ============================================================================
    - place: house                    # Ev yeri
    - place: apartment                # Apartman yeri
    - place: neighbourhood            # Mahalle (residential indicator)
    - place: quarter                  # Semt (residential indicator)
  
  # Tags for amenities (ULTRA COMPREHENSIVE - 4 Core Categories)
  amenity_tags:
    # ============================================================================
    # GROCERY - Market, Bakkal, Süpermarket, Manav (Food & Grocery Shopping)
    # ============================================================================
    grocery:
      # STRICT - ONLY major supermarkets (Toronto-style)
      - shop: supermarket          # Büyük süpermarket ONLY (Migros, Şok ≥50m², BİM, A101, Carrefour)
      # Note: Small bakkal, kiosk, bakery, greengrocer EXCLUDED for realistic WalkScore
    
    # ============================================================================
    # RESTAURANT - Restoran, Kafe, Lokanta, Yemek (Dining & Food Services)
    # ============================================================================
    restaurant:
      # STRICT - ONLY major dining establishments (Toronto-style)
      - amenity: restaurant        # Restoran (sit-down meals)
      - amenity: fast_food         # Fast food
      - amenity: cafe              # Kafe
      - amenity: food_court        # Yemek alanı (AVM food courts)
      # Note: Bars, pubs, ice cream shops, juice bars, teahouses EXCLUDED for realistic WalkScore
    
    # ============================================================================
    # SCHOOL - Okul, Kreş, Üniversite (Education & Childcare)
    # ============================================================================
    school:
      # STRICT - ONLY primary, secondary, and higher education (Toronto-style)
      - amenity: school            # İlkokul, ortaokul, lise ONLY
      - amenity: kindergarten      # Anaokulu, kreş
      - amenity: college           # Kolej, yüksekokul
      - amenity: university        # Üniversite
      # Note: Dershane, language schools, music schools, tutoring, libraries EXCLUDED for realistic WalkScore
    
    # ============================================================================
    # HEALTHCARE - Sağlık, Hastane, Eczane, Doktor (Health & Medical Services)
    # ============================================================================
    healthcare:
      # STRICT - ONLY major healthcare facilities (Toronto-style)
      - amenity: hospital          # Hastane ONLY (major hospitals)
      - amenity: clinic            # Klinik, poliklinik (major clinics)
      - amenity: doctors           # Doktor muayenehanesi (doctors' offices)
      - amenity: pharmacy          # Eczane (pharmacies)
      - healthcare: hospital       # Hastane (healthcare tag)
      - healthcare: clinic         # Klinik (healthcare tag)
      # Note: Opticians, massage, herbalists, therapists, veterinary EXCLUDED for realistic WalkScore
  
  # Tags for candidate locations (ULTRA COMPREHENSIVE)
  # These are potential locations where new amenities can be placed
  candidate_tags:
    # ============================================================================
    # PARKING AREAS (excellent conversion candidates - Otopark alanları)
    # ============================================================================
    - amenity: parking                # Otopark
    - amenity: parking_space          # Park yeri
    - amenity: parking_entrance       # Otopark girişi
    - amenity: bicycle_parking        # Bisiklet parkı
    - amenity: motorcycle_parking     # Motosiklet parkı
    - parking: surface                # Açık otopark
    - parking: multi-storey           # Katlı otopark
    - parking: underground            # Yeraltı otoparkı
    - parking: yes                    # Genel park alanı
    
    # ============================================================================
    # COMMERCIAL & RETAIL AREAS (Ticari alanlar)
    # ============================================================================
    - landuse: commercial             # Ticari alan
    - landuse: retail                 # Perakende alan
    - landuse: industrial             # Sanayi alanı (dönüştürülebilir)
    - shop: mall                      # AVM (içinde amenity konabilir)
    - building: commercial            # Ticari bina
    - building: retail                # Perakende binası
    - building: office                # Ofis binası (kat boş olabilir)
    - building: warehouse             # Depo (dönüştürülebilir)
    - building: industrial            # Sanayi binası (dönüştürülebilir)
    
    # ============================================================================
    # VACANT & ABANDONED (Boş ve terk edilmiş)
    # ============================================================================
    - shop: vacant                    # Boş dükkan
    - building: abandoned             # Terk edilmiş bina
    - building: ruins                 # Harabe
    - disused: yes                    # Kullanılmayan
    - disused:shop: yes               # Kullanılmayan dükkan
    - disused:building: yes           # Kullanılmayan bina
    - abandoned: yes                  # Terk edilmiş
    - abandoned:shop: yes             # Terk edilmiş dükkan
    - abandoned:building: yes         # Terk edilmiş bina
    - demolished: yes                 # Yıkılmış
    
    # ============================================================================
    # EMPTY OR UNDERUTILIZED LAND (Boş veya az kullanılan arazi)
    # ============================================================================
    - landuse: brownfield             # Eski sanayi alanı
    - landuse: greenfield             # Yeşil alan (yapılaşmamış)
    - landuse: construction           # İnşaat alanı
    - landuse: depot                  # Depo alanı
    - landuse: garages                # Garaj alanı
    - landuse: grass                  # Çimen alan (yapılaşabilir)
    - landuse: meadow                 # Çayır (yapılaşabilir)
    - landuse: allotments             # Bölünmüş araziler
    - natural: grassland              # Otluk alan
    
    # ============================================================================
    # PUBLIC SPACES (good for community amenities - Kamu alanları)
    # ============================================================================
    - amenity: marketplace            # Pazar yeri
    - amenity: community_centre       # Toplum merkezi
    - amenity: public_building        # Kamu binası
    - amenity: social_centre          # Sosyal merkez
    - amenity: townhall               # Belediye binası (içinde alan olabilir)
    - amenity: events_venue           # Etkinlik alanı
    - building: civic                 # Sivil bina
    - building: public                # Kamu binası
    - building: government            # Devlet binası
    
    # ============================================================================
    # SQUARES & OPEN SPACES (Meydan ve açık alanlar)
    # ============================================================================
    - place: square                   # Meydan
    - place: plaza                    # Plaza
    - leisure: common                 # Ortak alan
    - leisure: garden                 # Bahçe (küçük amenity konabilir)
    - leisure: plaza                  # Plaza (leisure tag'i)
    
    # ============================================================================
    # INFRASTRUCTURE (may have extra space - Altyapı)
    # ============================================================================
    - building: service               # Servis binası
    - building: shed                  # Sundurma, baraka
    - building: kiosk                 # Büfe kulübesi
    - building: container             # Konteyner
    - man_made: storage_tank          # Depolama tankı alanı
    - man_made: works                 # İmalathane (boş olabilir)
    
    # ============================================================================
    # TEMPORARY OR FLEXIBLE USE (Geçici veya esnek kullanım)
    # ============================================================================
    - temporary: yes                  # Geçici yapı
    - building: temporary             # Geçici bina
    - building: portable              # Portatif bina
    - building: mobile_home           # Mobil ev (alan olarak)
    
    # ============================================================================
    # TURKISH SPECIFIC
    # ============================================================================
    - amenity: otopark                # Otopark (Türkçe)
    - landuse: bos_alan               # Boş alan (Türkçe, informal)
    - building: bos                   # Boş bina (Türkçe, informal)
  
  # Data Quality Parameters (NEW)
  data_quality:
    # Maximum distance for snapping residential to network nodes (meters)
    max_snapping_distance: 500
    # Minimum distance between duplicate locations (meters)
    duplicate_threshold: 1.0
    # Minimum distance between duplicate amenities (meters)
    amenity_duplicate_threshold: 5.0
    # Maximum distance for candidate locations to be useful (meters)
    max_candidate_distance: 2000
    # Enable data validation
    enable_validation: true
    # Enable duplicate detection
    enable_duplicate_detection: true

# Visualization
visualization:
  map_center:
    latitude: 39.6400
    longitude: 27.8750
  zoom_level: 14
  tile_layer: "OpenStreetMap"
  # Colors
  colors:
    residential: "#3498db"  # Blue
    existing_amenity: "#2ecc71"  # Green
    allocated_amenity: "#e74c3c"  # Red
    candidate_location: "#f39c12"  # Orange
    walkscore_high: "#2ecc71"
    walkscore_medium: "#f39c12"
    walkscore_low: "#e74c3c"

